{"version":3,"sources":["../src/data-providers/strapi-v4/index.ts","../src/create-data-provider.ts","../src/default.options.ts","../src/data-providers/strapi-v4/utils/mapOperator.ts","../src/data-providers/strapi-v4/utils/generateFilter.ts","../src/data-providers/strapi-v4/utils/normalizeData.ts","../src/data-providers/strapi-v4/utils/transformErrorMessages.ts","../src/data-providers/strapi-v4/utils/transformHttpError.ts","../src/data-providers/strapi-v4/strapi-v4.options.ts"],"sourcesContent":["import type { Options as KyOptions } from \"ky\";\n\nimport { createDataProvider } from \"../../create-data-provider.js\";\nimport { strapiV4DataProviderOptions } from \"./strapi-v4.options.js\";\n\ntype CreateStrapiV4DataProviderParams = {\n  apiURL: string;\n  kyOptions?: KyOptions;\n};\n\nconst createStrapiV4DataProvider = (\n  params: CreateStrapiV4DataProviderParams,\n) => {\n  const { apiURL, kyOptions } = params;\n\n  return createDataProvider(apiURL, strapiV4DataProviderOptions, kyOptions);\n};\n\nexport { createStrapiV4DataProvider };\n","import type {\n  CreateManyResponse,\n  CreateResponse,\n  CustomResponse,\n  DataProvider,\n  DeleteOneResponse,\n  GetManyResponse,\n  GetOneResponse,\n  UpdateManyResponse,\n  UpdateResponse,\n} from \"@refinedev/core\";\nimport dm from \"deepmerge\";\nimport kyBase, { type Options as KyOptions } from \"ky\";\nimport qs from \"qs\";\n\nimport type { AnyObject, CreateDataProviderOptions } from \"./types\";\nimport { defaultCreateDataProviderOptions } from \"./default.options\";\n\ntype CreateDataProvider = {\n  kyInstance: typeof kyBase;\n  dataProvider: DataProvider;\n};\n\nexport const createDataProvider = (\n  apiURL: string,\n  baseOptions: CreateDataProviderOptions = defaultCreateDataProviderOptions,\n  kyOptions: KyOptions = {},\n): CreateDataProvider => {\n  const options = dm(defaultCreateDataProviderOptions, baseOptions);\n\n  const ky = kyBase.create({\n    prefixUrl: apiURL,\n    ...kyOptions,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n      ...kyOptions.headers,\n    },\n    throwHttpErrors: false,\n  });\n\n  return {\n    kyInstance: ky,\n    dataProvider: {\n      getList: async (params) => {\n        const endpoint = options.getList.getEndpoint(params);\n\n        const headers = await options.getList.buildHeaders(params);\n\n        const query = await options.getList.buildQueryParams(params);\n\n        const response = await ky(endpoint, {\n          headers,\n          searchParams: qs.stringify(query, { encodeValuesOnly: true }),\n        });\n\n        const data = await options.getList.mapResponse(\n          response.clone(),\n          params,\n        );\n\n        const total = await options.getList.getTotalCount(\n          response.clone(),\n          params,\n        );\n\n        return { data, total };\n      },\n      getOne: async (params): Promise<GetOneResponse<any>> => {\n        const endpoint = options.getOne.getEndpoint(params);\n\n        const headers = await options.getOne.buildHeaders(params);\n\n        const query = await options.getOne.buildQueryParams(params);\n\n        const response = await ky(endpoint, {\n          headers,\n          searchParams: qs.stringify(query, { encodeValuesOnly: true }),\n        });\n\n        const data = await options.getOne.mapResponse(response, params);\n\n        return { data };\n      },\n      getMany: options.getMany\n        ? async (params): Promise<GetManyResponse<any>> => {\n            const endpoint =\n              options.getMany.getEndpoint?.(params) ?? params.resource;\n\n            const headers =\n              (await options.getMany.buildHeaders?.(params)) ?? {};\n\n            const query =\n              (await options.getMany.buildQueryParams?.(params)) ?? {};\n\n            const response = await ky(endpoint, {\n              headers,\n              searchParams: qs.stringify(query, { encodeValuesOnly: true }),\n            });\n\n            if (response.ok) {\n              const data = await options.getMany.mapResponse(response, params);\n\n              return { data };\n            }\n\n            let error;\n\n            if (options.getMany.transformError) {\n              error = await options.getMany.transformError(response, params);\n            } else {\n              error = await response.json();\n            }\n\n            throw error;\n          }\n        : undefined,\n      create: async (params): Promise<CreateResponse<any>> => {\n        const endpoint = options.create.getEndpoint(params);\n\n        const headers = await options.create.buildHeaders(params);\n\n        const query = await options.create.buildQueryParams(params);\n\n        const body = await options.create.buildBodyParams(params);\n\n        const response = await ky(endpoint, {\n          method: \"post\",\n          headers,\n          searchParams: qs.stringify(query, { encodeValuesOnly: true }),\n          body: JSON.stringify(body),\n        });\n\n        if (response.ok) {\n          const data = await options.create.mapResponse(response, params);\n\n          return { data };\n        }\n\n        const error = await options.create.transformError(response, params);\n\n        throw error;\n      },\n      createMany: options.createMany\n        ? async (params): Promise<CreateManyResponse<any>> => {\n            const endpoint =\n              options.createMany.getEndpoint?.(params) ?? params.resource;\n\n            const headers =\n              (await options.createMany.buildHeaders?.(params)) ?? {};\n\n            const query =\n              (await options.createMany.buildQueryParams?.(params)) ?? {};\n\n            const body = await options.createMany.buildBodyParams(params);\n\n            const response = await ky(endpoint, {\n              method: \"post\",\n              headers,\n              searchParams: qs.stringify(query, { encodeValuesOnly: true }),\n              body: JSON.stringify(body),\n            });\n\n            if (response.ok) {\n              const data = await options.createMany.mapResponse(\n                response,\n                params,\n              );\n\n              return { data };\n            }\n\n            let error;\n\n            if (options.createMany.transformError) {\n              error = await options.createMany?.transformError(\n                response,\n                params,\n              );\n            } else {\n              error = await response.json();\n            }\n\n            throw error;\n          }\n        : undefined,\n      update: async (params): Promise<UpdateResponse<any>> => {\n        const endpoint = options.update.getEndpoint(params);\n\n        // TODO: Validate method name.\n        const method = options.update.getRequestMethod(params);\n\n        const headers = await options.update.buildHeaders(params);\n\n        const query = await options.update.buildQueryParams(params);\n\n        const body = await options.update.buildBodyParams(params);\n\n        const response = await ky(endpoint, {\n          method,\n          headers,\n          searchParams: qs.stringify(query, { encodeValuesOnly: true }),\n          body: JSON.stringify(body),\n        });\n\n        if (response.ok) {\n          const data = await options.update.mapResponse(response, params);\n\n          return { data };\n        }\n\n        const error = await options.update.transformError(response, params);\n\n        throw error;\n      },\n      updateMany: options.updateMany\n        ? async (params): Promise<UpdateManyResponse<any>> => {\n            const endpoint = options.updateMany.getEndpoint(params);\n\n            const method =\n              options.updateMany.getRequestMethod?.(params) ?? \"patch\";\n\n            const headers =\n              (await options.updateMany.buildHeaders?.(params)) ?? {};\n\n            const query =\n              (await options.updateMany.buildQueryParams?.(params)) ?? {};\n\n            const body = await options.updateMany.buildBodyParams(params);\n\n            const response = await ky(endpoint, {\n              method,\n              headers,\n              searchParams: qs.stringify(query, { encodeValuesOnly: true }),\n              body: JSON.stringify(body),\n            });\n\n            if (response.ok) {\n              const data = await options.updateMany.mapResponse(\n                response,\n                params,\n              );\n\n              return { data };\n            }\n\n            let error;\n\n            if (options.updateMany.transformError) {\n              error = await options.updateMany.transformError(response, params);\n            } else {\n              error = await response.json();\n            }\n\n            throw error;\n          }\n        : undefined,\n      deleteOne: async (params): Promise<DeleteOneResponse<any>> => {\n        const endpoint = options.deleteOne.getEndpoint(params);\n\n        const headers = await options.deleteOne.buildHeaders(params);\n\n        const query = await options.deleteOne.buildQueryParams(params);\n\n        const response = await ky(endpoint, {\n          method: \"delete\",\n          headers,\n          searchParams: qs.stringify(query, { encodeValuesOnly: true }),\n        });\n\n        if (response.ok) {\n          const data = await options.deleteOne.mapResponse(response, params);\n\n          return { data };\n        }\n\n        const error = await options.deleteOne.transformError(response, params);\n\n        throw error;\n      },\n      deleteMany: options.deleteMany\n        ? async (params): Promise<DeleteOneResponse<any>> => {\n            const endpoint =\n              options.deleteMany.getEndpoint?.(params) ?? params.resource;\n\n            const headers =\n              (await options.deleteMany.buildHeaders?.(params)) ?? {};\n\n            const query =\n              (await options.deleteMany.buildQueryParams?.(params)) ?? {};\n\n            const response = await ky(endpoint, {\n              method: \"delete\",\n              headers,\n              searchParams: qs.stringify(query, { encodeValuesOnly: true }),\n            });\n\n            if (options.deleteMany.mapResponse) {\n              const data = await options.deleteMany.mapResponse(\n                response,\n                params,\n              );\n\n              return { data };\n            }\n\n            return { data: undefined };\n          }\n        : undefined,\n      custom: async (params): Promise<CustomResponse<any>> => {\n        const { method, url } = params;\n\n        let client = kyBase.create({\n          method,\n          ...kyOptions,\n        });\n\n        const headers = await options.custom.buildHeaders(params);\n        if (headers) {\n          client = client.extend({ headers });\n        }\n\n        const query = await options.custom.buildQueryParams(params);\n        if (query) {\n          client = client.extend({\n            searchParams: qs.stringify(query, { encodeValuesOnly: true }),\n          });\n        }\n\n        if ([\"post\", \"put\", \"patch\"].includes(method)) {\n          const body = await options.custom.buildBodyParams(params);\n\n          if (body) {\n            client = client.extend({ body: JSON.stringify(body) });\n          }\n        }\n\n        const response = await client<AnyObject>(url);\n\n        if (response.ok) {\n          const data = await options.custom.mapResponse(response, params);\n\n          return { data };\n        }\n\n        const error = await options.custom.transformError(response, params);\n\n        throw error;\n      },\n      getApiUrl: () => apiURL,\n    },\n  };\n};\n","import type {\n  CreateParams,\n  CustomParams,\n  DeleteOneParams,\n  GetListParams,\n  GetOneParams,\n  UpdateParams,\n  HttpError,\n} from \"@refinedev/core\";\nimport type { KyResponse } from \"ky\";\n\nimport type { AnyObject } from \"./types\";\n\nexport const defaultCreateDataProviderOptions = {\n  getList: {\n    getEndpoint(params: GetListParams): string {\n      return `${params.resource}`;\n    },\n    async buildHeaders(params: GetListParams) {\n      return params.meta?.headers ?? {};\n    },\n    async buildQueryParams(params: GetListParams) {\n      const { filters, sorters, pagination } = params;\n\n      const queryParams = {\n        filters,\n        sorters,\n        pagination,\n        ...params.meta?.query,\n      };\n\n      // filters[0][field]=id&filters[0][operator]=eq&filters[0][value]=123\n\n      return queryParams;\n    },\n    async mapResponse(\n      response: KyResponse<AnyObject>,\n      _params: GetListParams,\n    ): Promise<any[]> {\n      return await response.json();\n    },\n    async getTotalCount(\n      _response: KyResponse<AnyObject>,\n      _params: GetListParams,\n    ): Promise<number> {\n      return -1;\n    },\n  },\n  getOne: {\n    getEndpoint(params: GetOneParams) {\n      return `${params.resource}/${params.id}`;\n    },\n    async buildHeaders(params: GetOneParams) {\n      return params.meta?.headers ?? {};\n    },\n    async buildQueryParams(params: GetOneParams) {\n      return params.meta?.query ?? {};\n    },\n    async mapResponse(\n      response: KyResponse<AnyObject>,\n      _params: GetOneParams,\n    ): Promise<Record<string, any>> {\n      return await response.json();\n    },\n  },\n  create: {\n    getEndpoint(params: CreateParams<any>): string {\n      return params.resource;\n    },\n    async buildHeaders(params: CreateParams<any>) {\n      return params.meta?.headers ?? {};\n    },\n    async buildQueryParams(params: CreateParams<any>) {\n      return params.meta?.query ?? {};\n    },\n    async buildBodyParams(params: CreateParams<any>) {\n      return params.variables;\n    },\n    async mapResponse(\n      response: KyResponse<AnyObject>,\n      _params: CreateParams<any>,\n    ): Promise<Record<string, any>> {\n      return await response.json();\n    },\n    async transformError(\n      response: KyResponse<AnyObject>,\n      params: CreateParams<any>,\n    ): Promise<HttpError> {\n      const body = await response.json();\n\n      return {\n        message: JSON.stringify({ ...body, variables: params.variables }),\n        statusCode: response.status,\n      };\n    },\n  },\n  update: {\n    getEndpoint(params: UpdateParams<any>): string {\n      return `${params.resource}/${params.id}`;\n    },\n    getRequestMethod(params: UpdateParams<any>) {\n      return params.meta?.method ?? \"patch\";\n    },\n    async buildHeaders(params: UpdateParams<any>) {\n      return params.meta?.headers ?? {};\n    },\n    async buildQueryParams(params: UpdateParams<any>) {\n      return params.meta?.query ?? {};\n    },\n    async buildBodyParams(params: UpdateParams<any>) {\n      return params.variables;\n    },\n    async mapResponse(\n      response: KyResponse<AnyObject>,\n      _params: UpdateParams<any>,\n    ) {\n      return await response.json();\n    },\n\n    async transformError(\n      response: KyResponse<AnyObject>,\n      params: UpdateParams<any>,\n    ): Promise<HttpError> {\n      const body = await response.json();\n\n      return {\n        message: JSON.stringify({\n          ...body,\n          id: params.id,\n          variables: params.variables,\n        }),\n        statusCode: response.status,\n      };\n    },\n  },\n  deleteOne: {\n    getEndpoint(params: DeleteOneParams<any>) {\n      return `${params.resource}/${params.id}`;\n    },\n    async buildHeaders(params: DeleteOneParams<any>) {\n      return params.meta?.headers ?? {};\n    },\n    async buildQueryParams(params: DeleteOneParams<any>) {\n      return params.meta?.query ?? {};\n    },\n    async mapResponse(\n      _response: KyResponse<AnyObject>,\n      _params: DeleteOneParams<any>,\n    ) {\n      return undefined;\n    },\n    async transformError(\n      response: KyResponse<AnyObject>,\n      params: DeleteOneParams<any>,\n    ) {\n      const body = await response.json();\n\n      return {\n        message: JSON.stringify({\n          ...body,\n          id: params.id,\n        }),\n        statusCode: response.status,\n      };\n    },\n  },\n  custom: {\n    async buildQueryParams(params: CustomParams<any>) {\n      return params.query ?? {};\n    },\n    async buildHeaders(params: CustomParams<any>) {\n      return params.headers ?? {};\n    },\n    async buildBodyParams(params: CustomParams<any>) {\n      return params.payload ?? {};\n    },\n    async mapResponse(\n      response: KyResponse<AnyObject | AnyObject[]>,\n      _params: CustomParams<any>,\n    ) {\n      return await response.json();\n    },\n    async transformError(\n      response: KyResponse<AnyObject>,\n      params: CustomParams<any>,\n    ) {\n      const body = await response.json();\n\n      return {\n        message: JSON.stringify({\n          ...body,\n          params,\n        }),\n        statusCode: response.status,\n      };\n    },\n  },\n};\n","import type { CrudOperators } from \"@refinedev/core\";\n\nexport const mapOperator = (operator: CrudOperators) => {\n  switch (operator) {\n    case \"startswith\":\n      return \"startsWith\";\n    case \"endswith\":\n      return \"endsWith\";\n    case \"nin\":\n      return \"notIn\";\n    case \"ncontains\":\n      return \"notContainsi\";\n    case \"ncontainss\":\n      return \"notContains\";\n    case \"containss\":\n      return \"contains\";\n    case \"contains\":\n      return \"containsi\";\n    case \"nnull\":\n      return \"notNull\";\n  }\n\n  return operator;\n};\n","import type {\n  CrudFilters,\n  LogicalFilter,\n  ConditionalFilter,\n} from \"@refinedev/core\";\nimport { mapOperator } from \"./mapOperator\";\n\nexport const generateNestedFilterField = (field: string): string[] => {\n  if (field.startsWith(\"[\") && field.endsWith(\"]\")) {\n    const matches = field.match(/\\[([^\\]]+)\\]/g);\n    if (matches) {\n      return matches.map((match) => match.slice(1, -1));\n    }\n  }\n\n  return field.split(\".\");\n};\n\nconst generateLogicalFilter = (filter: LogicalFilter): any => {\n  const { field, operator, value } = filter;\n\n  const mappedOperator = mapOperator(operator);\n  const fieldPath = generateNestedFilterField(field);\n\n  const filterObj: any = {};\n\n  let current = filterObj;\n  for (let i = 0; i < fieldPath.length - 1; i++) {\n    current[fieldPath[i]] = {};\n    current = current[fieldPath[i]];\n  }\n  current[fieldPath[fieldPath.length - 1]] = { [`$${mappedOperator}`]: value };\n\n  return filterObj;\n};\n\nconst mergeFilters = (target: any, source: any): any => {\n  for (const key in source) {\n    if (key in target) {\n      if (typeof target[key] === \"object\" && typeof source[key] === \"object\") {\n        target[key] = mergeFilters(target[key], source[key]);\n      }\n    } else {\n      target[key] = source[key];\n    }\n  }\n  return target;\n};\n\nconst generateConditionalFilter = (filter: ConditionalFilter): any => {\n  const result: any = {};\n  const operatorKey = `$${filter.operator}`;\n\n  const subFilters = filter.value.map((item) => {\n    if (item.operator !== \"or\" && item.operator !== \"and\" && \"field\" in item) {\n      return generateLogicalFilter(item);\n    }\n    return generateConditionalFilter(item);\n  });\n\n  result[operatorKey] = subFilters;\n  return result;\n};\n\nexport const generateFilter = (filters?: CrudFilters): any => {\n  if (!filters || filters.length === 0) {\n    return {};\n  }\n\n  let result: any = {};\n\n  filters.forEach((filter) => {\n    let filterObj: any;\n\n    if (\n      filter.operator !== \"or\" &&\n      filter.operator !== \"and\" &&\n      \"field\" in filter\n    ) {\n      filterObj = generateLogicalFilter(filter);\n    } else {\n      filterObj = generateConditionalFilter(filter);\n    }\n\n    result = mergeFilters(result, filterObj);\n  });\n\n  return result;\n};\n","const flatten = (data: any) => {\n  if (!data.attributes) return data;\n\n  return {\n    id: data.id,\n    ...data.attributes,\n  };\n};\n\nconst isObject = (data: any) =>\n  Object.prototype.toString.call(data) === \"[object Object]\";\n\nexport const normalizeData = (data: any): any => {\n  if (Array.isArray(data)) {\n    return data.map((item) => normalizeData(item));\n  }\n\n  if (isObject(data)) {\n    if (Array.isArray(data.data)) {\n      data = [...data.data];\n    } else if (isObject(data.data)) {\n      data = flatten({ ...data.data });\n    } else if (data.data === null) {\n      data = null;\n    } else {\n      data = flatten(data);\n    }\n\n    for (const key in data) {\n      data[key] = normalizeData(data[key]);\n    }\n\n    return data;\n  }\n\n  return data;\n};\n","type ErrorMessage = {\n  path: string[];\n  message: string;\n  name: string;\n};\n\ntype TransformedErrors = {\n  [key: string]: string[];\n};\n\nexport const transformErrorMessages = (\n  errorMessages: ErrorMessage[],\n): TransformedErrors => {\n  const transformedErrors: TransformedErrors = {};\n\n  for (const error of errorMessages) {\n    const key = error.path[0];\n\n    if (transformedErrors[key]) {\n      transformedErrors[key].push(error.message);\n    } else {\n      transformedErrors[key] = [error.message];\n    }\n  }\n\n  return transformedErrors;\n};\n","import type { HttpError } from \"@refinedev/core\";\nimport { transformErrorMessages } from \"./transformErrorMessages\";\n\nexport const transformHttpError = (err: any): HttpError => {\n  const error = err || {};\n\n  const message = error?.message;\n  const statusCode = error?.status;\n  const errorMessages = error?.details?.errors || [];\n\n  const httpError: HttpError = {\n    statusCode,\n    message,\n    errors: transformErrorMessages(errorMessages),\n  };\n\n  return httpError;\n};\n","import type {\n  CreateParams,\n  CustomParams,\n  DeleteOneParams,\n  GetListParams,\n  GetManyParams,\n  GetOneParams,\n  UpdateParams,\n} from \"@refinedev/core\";\nimport type { KyResponse } from \"ky\";\nimport type { AnyObject } from \"src/types\";\nimport { generateFilter } from \"./utils/generateFilter\";\nimport { normalizeData } from \"./utils/normalizeData\";\nimport { transformHttpError } from \"./utils/transformHttpError\";\n\nexport const strapiV4DataProviderOptions = {\n  getList: {\n    getEndpoint(params: GetListParams): string {\n      return `${params.resource}`;\n    },\n    async buildFilters(params: GetListParams) {\n      const { filters = [] } = params;\n\n      const queryFilters = generateFilter(filters);\n\n      return queryFilters;\n    },\n    async buildPagination(params: GetListParams) {\n      const {\n        currentPage = 1,\n        pageSize = 10,\n        mode = \"server\",\n      } = params.pagination ?? {};\n\n      if (mode === \"server\") {\n        return {\n          page: currentPage,\n          pageSize: pageSize,\n        };\n      }\n\n      return {};\n    },\n    async buildSorters(params: GetListParams) {\n      const { sorters = [] } = params;\n\n      const _sorters: string[] = [];\n\n      if (sorters) {\n        // strapi.com/categories?sort=id:asc\n        sorters.forEach((item) => {\n          if (item.order) {\n            _sorters.push(`${item.field}:${item.order}`);\n          }\n        });\n      }\n\n      const sort = _sorters.length ? _sorters.join(\",\") : undefined;\n\n      return { sort };\n    },\n    async buildQueryParams(params: GetListParams) {\n      const filters = await this.buildFilters(params);\n\n      const { sort } = await this.buildSorters(params);\n\n      const pagination = await this.buildPagination(params);\n\n      const { meta } = params;\n\n      const locale = meta?.locale;\n      const fields = meta?.fields;\n      const populate = meta?.populate;\n      const publicationState = meta?.publicationState;\n\n      const queryParams = {\n        pagination,\n        locale,\n        publicationState,\n        fields,\n        populate,\n        sort,\n        filters,\n      };\n\n      return queryParams;\n    },\n    async mapResponse(\n      response: KyResponse<AnyObject>,\n      params: GetListParams,\n    ): Promise<any[]> {\n      const body = await response.json();\n\n      return normalizeData(body);\n    },\n    async getTotalCount(\n      response: KyResponse<AnyObject>,\n      params: GetListParams,\n    ): Promise<number> {\n      const body = await response.json();\n\n      return body.meta?.pagination?.total || normalizeData(body)?.length;\n    },\n  },\n  getOne: {\n    getEndpoint(params: GetOneParams) {\n      return `${params.resource}/${params.id}`;\n    },\n    async buildHeaders(params: GetOneParams) {\n      return params.meta?.headers ?? {};\n    },\n    async buildQueryParams(params: GetOneParams) {\n      const { meta } = params ?? {};\n\n      const locale = meta?.locale;\n      const fields = meta?.fields;\n      const populate = meta?.populate;\n      const publicationState = meta?.publicationState;\n\n      const queryParams = {\n        locale,\n        fields,\n        populate,\n        publicationState,\n      };\n\n      return queryParams;\n    },\n    async mapResponse(\n      response: KyResponse<AnyObject>,\n      params: GetOneParams,\n    ): Promise<Record<string, any>> {\n      const body = await response.json();\n\n      return normalizeData(body);\n    },\n  },\n  getMany: {\n    getEndpoint(params: GetManyParams) {\n      return `${params.resource}`;\n    },\n    async buildHeaders(params: GetManyParams) {\n      return params.meta?.headers ?? {};\n    },\n    async buildQueryParams(params: GetManyParams) {\n      const { ids, meta } = params ?? {};\n      const locale = meta?.locale;\n      const fields = meta?.fields;\n      const populate = meta?.populate;\n      const publicationState = meta?.publicationState;\n\n      const filters = generateFilter([\n        { field: \"id\", operator: \"in\", value: ids },\n      ]);\n\n      const query = {\n        locale,\n        fields,\n        populate,\n        publicationState,\n        filters,\n        pagination: { pageSize: ids.length },\n      };\n\n      return query;\n    },\n    async mapResponse(response: KyResponse<AnyObject>, params: GetManyParams) {\n      const body = await response.json();\n\n      return normalizeData(body);\n    },\n  },\n  create: {\n    getEndpoint(params: CreateParams<any>): string {\n      return `${params.resource}`;\n    },\n\n    async buildBodyParams(params: CreateParams<any>) {\n      const { resource, variables } = params;\n      let bodyParams = { data: variables };\n\n      if (resource === \"users\") {\n        bodyParams = variables;\n      }\n\n      return bodyParams;\n    },\n    async mapResponse(\n      response: KyResponse<AnyObject>,\n      _params: CreateParams<any>,\n    ): Promise<Record<string, any>> {\n      if (response.status >= 400) {\n        const httpError = transformHttpError(response);\n\n        throw httpError;\n      }\n\n      const body = await response.json();\n\n      return body;\n    },\n  },\n  update: {\n    getEndpoint(params: UpdateParams<any>): string {\n      return `${params.resource}/${params.id}`;\n    },\n    getRequestMethod(params: UpdateParams<any>) {\n      return params.meta?.method ?? \"put\";\n    },\n    async buildHeaders(params: UpdateParams<any>) {\n      return params.meta?.headers ?? {};\n    },\n    async buildQueryParams(params: UpdateParams<any>) {\n      return params.meta?.query ?? {};\n    },\n    async buildBodyParams(params: UpdateParams<any>) {\n      const { resource, variables } = params;\n      let bodyParams = { data: variables };\n\n      if (resource === \"users\") {\n        bodyParams = variables;\n      }\n\n      return bodyParams;\n    },\n    async mapResponse(\n      response: KyResponse<AnyObject>,\n      params: UpdateParams<any>,\n    ) {\n      return await response.json();\n    },\n  },\n  deleteOne: {\n    getEndpoint(params: DeleteOneParams<any>) {\n      return `${params.resource}/${params.id}`;\n    },\n    async buildHeaders(params: DeleteOneParams<any>) {\n      return params.meta?.headers ?? {};\n    },\n    async buildQueryParams(params: DeleteOneParams<any>) {\n      return params.meta?.query ?? {};\n    },\n    async mapResponse(\n      _response: KyResponse<AnyObject>,\n      _params: DeleteOneParams<any>,\n    ) {\n      return undefined;\n    },\n  },\n  custom: {\n    async buildQueryParams(params: CustomParams<any>) {\n      const queryParams = {};\n\n      if (params.sorters) {\n        const _sorters: string[] = [];\n\n        if (params.sorters) {\n          // strapi.com/categories?sort=id:asc\n          params.sorters.forEach((item) => {\n            if (item.order) {\n              _sorters.push(`${item.field}:${item.order}`);\n            }\n          });\n        }\n\n        const sort = _sorters.length ? _sorters.join(\",\") : undefined;\n\n        Object.assign(queryParams, { sort });\n      }\n\n      if (params.filters) {\n        const queryFilters = generateFilter(params.filters);\n\n        Object.assign(queryParams, { filters: queryFilters });\n      }\n\n      return queryParams;\n    },\n    async buildHeaders(params: CustomParams<any>) {\n      return params.headers ?? {};\n    },\n    async buildBodyParams(params: CustomParams<any>) {\n      return params.payload ?? {};\n    },\n    async mapResponse(\n      response: KyResponse<AnyObject>,\n      params: CustomParams<any>,\n    ) {\n      return await response.json();\n    },\n  },\n};\n"],"mappings":"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","names":["dm","kyBase","qs"]}